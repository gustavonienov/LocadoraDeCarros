<div class="container mt-4">
    <h2>Lista de Carros</h2>
    <table class="table table-striped table-hover mt-3">
        <thead class="table-dark">
            <tr>
                <th>Marca</th>
                <th>Modelo</th>
                <th>Ano</th>
                <th>Placa</th>
                <th>Disponível</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody id="tabela-carros-corpo">
        </tbody>
    </table>
</div>

<script>
    async function excluirCarro(placa) {
        if (confirm('Tem certeza que deseja excluir este carro?')) {
            const response = await fetch(`/car/${placa}`, {
                method: 'DELETE'
            });
            if (response.ok) {
                alert('Carro excluído com sucesso!');
                location.reload();
            } else {
                alert('Erro ao excluir carro.');
            }
        }
    }
    fetch('/api/locadora')
        .then(response => response.json())
        .then(data => {
            const tbody = document.getElementById('tabela-carros-corpo');
            tbody.innerHTML = '';

            data.carros.forEach(carro => {
                const disponibilidade = carro.disponivel
                    ? '<span class="badge bg-success">Sim</span>'
                    : '<span class="badge bg-danger">Não</span>';

                const row = `
                        <tr>
                            <td>${carro.marca}</td>
                            <td>${carro.modelo}</td>
                            <td>${carro.ano}</td>
                            <td>${carro.placa}</td>
                            <td>${disponibilidade}</td>
                            <td>
                                <button class="btn btn-danger btn-sm" onclick="excluirCarro('${carro.placa}')">Excluir</button>
                            </td>
                        </tr>
                    `;
                tbody.innerHTML += row;
            });
        })
        .catch(error => console.error('Erro ao carregar os dados dos carros:', error));
</script>