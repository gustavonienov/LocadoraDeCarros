<div class="container mt-4">
    <h2>Lista de Clientes</h2>
    <table class="table table-striped table-hover mt-3">
        <thead class="table-dark">
            <tr>
                <th>Nome</th>
                <th>CPF</th>
                <th>Telefone</th>
                <th>Email</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody id="tabela-clientes-corpo">
        </tbody>
    </table>
</div>

<script>
    async function excluirCliente(cpf) {
        if (confirm('Tem certeza que deseja excluir este cliente?')) {
            const response = await fetch(`/cust/${cpf}`, {
                method: 'DELETE'
            });
            if (response.ok) {
                alert('Cliente excluído com sucesso!');
                location.reload();
            } else {
                alert('Erro ao excluir cliente.');
            }
        }
    }
    fetch('/api/clientes')
        .then(response => response.json())
        .then(data => {
            const tbody = document.getElementById('tabela-clientes-corpo');
            tbody.innerHTML = '';

            data.clientes.forEach(cliente => {
                const row = `
                    <tr>
                        <td>${cliente.nome}</td>
                        <td>${cliente.cpf}</td>
                        <td>${cliente.telefone}</td>
                        <td>${cliente.email}</td>
                        <td>
                            <button class="btn btn-danger btn-sm" onclick="excluirCliente('${cliente.cpf}')">Excluir</button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        })
        .catch(error => console.error('Erro ao carregar os dados dos clientes:', error));

</script>