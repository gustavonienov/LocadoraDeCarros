<div class="container mt-4">
    <h2>Lista de Locações</h2>
    <table class="table table-striped table-hover mt-3">
        <thead class="table-dark">
            <tr>
                <th>Cliente (CPF)</th>
                <th>Carro (Placa)</th>
                <th>Data Início</th>
                <th>Data Fim</th>
                <th>Valor Total</th>
            </tr>
        </thead>
        <tbody id="tabela-locacoes-corpo">
        </tbody>
    </table>
</div>

<script>
    (async () => {
        const response = await fetch('/rents');
        const locacoes = await response.json();

        const tbody = document.getElementById('tabela-locacoes-corpo');
        tbody.innerHTML = '';

        locacoes.forEach(locacao => {
            const row = `
                <tr>
                    <td>${locacao.customer ? locacao.customer.cpf : 'Não encontrado'}</td>
                    <td>${locacao.car ? locacao.car.placa : 'Não encontrado'}</td>
                    <td>${locacao.dataInicio ? locacao.dataInicio.substring(0,10) : ''}</td>
                    <td>${locacao.dataFim ? locacao.dataFim.substring(0,10) : ''}</td>
                    <td>${Number(locacao.valor).toFixed(2)}</td>
                </tr>
            `;
            tbody.innerHTML += row;
        });
    })();
</script>